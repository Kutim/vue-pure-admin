var O=(D,h,c)=>new Promise((g,f)=>{var v=r=>{try{n(c.next(r))}catch(d){f(d)}},b=r=>{try{n(c.throw(r))}catch(d){f(d)}},n=r=>r.done?g(r.value):Promise.resolve(r.value).then(v,b);n((c=c.apply(D,h)).next())});import{useRole as ue}from"./hook-g4BQ3qJD.js";import{R as fe,P as _e}from"./refresh-DAxkYH6X.js";import{u as m}from"./hooks-DgnQ75JU.js";import{d as he,p as ge,a as _,m as ve,d1 as be,y as xe,d2 as ye,gh as ke,e as s,A as Ce,f as E,k as F,i as l,w as a,u as e,h as u,g as i,v as C,a0 as L,B as W,t as G,aG as w,j as we,_ as Ve}from"./index-0TwB07UG.js";import{d as Re}from"./delete-Ce0TSdK5.js";import{d as Se}from"./edit-pen-Ci7W0xNM.js";import{d as $e,a as Ie}from"./close-CObHKOmY.js";import{d as De}from"./add-circle-line-DOJqVT3s.js";import{d as Pe}from"./check-CIQVCvCT.js";import"./form.vue_vue_type_script_setup_true_lang-DY40EL0d.js";import"./hooks-DVMJxzWM.js";import"./system-DH2bN0Dd.js";import"./sortable.esm-6WsHlDA5.js";import"./epTheme-Zpslo1W7.js";const Ue={class:"main"},Be={key:0,class:"!min-w-[calc(100vw-60vw-268px)] mt-2 px-2 pb-2 bg-bg_color ml-2 overflow-auto"},ze={class:"flex justify-between w-full px-3 pt-5 pb-4"},Te={class:"flex"},Ne={class:"font-bold truncate"},je={class:"flex flex-wrap"},Ae=he({name:"SystemRole",__name:"index",setup(D){const h=ge(()=>["w-[22px]","h-[22px]","flex","justify-center","items-center","outline-none","rounded-[4px]","cursor-pointer","transition-colors","hover:bg-[#0000000f]","dark:hover:bg-[#ffffff1f]","dark:hover:text-[#ffffffd9]"]),c=_(),g=_(),f=_(),v=_(),b=_(),{form:n,isShow:r,curRow:d,loading:P,columns:H,rowStyle:Q,dataList:X,treeData:q,treeProps:J,isLinkage:x,pagination:K,isExpandAll:V,isSelectAll:R,treeSearchValue:S,onSearch:U,resetForm:Y,openDialog:B,handleMenu:z,handleSave:Z,handleDelete:ee,filterMethod:le,transformI18n:oe,onQueryChanged:te,handleSizeChange:ae,handleCurrentChange:ne,handleSelectionChange:se}=ue(c);return ve(()=>{be(v,()=>O(this,null,function*(){yield xe(),ye(60).then(()=>{b.value=parseFloat(ke(f.value.getTableDoms().tableWrapper.style.height,"px"))})}))}),(Me,t)=>{var A;const $=s("el-input"),y=s("el-form-item"),T=s("el-option"),re=s("el-select"),p=s("el-button"),ie=s("el-form"),ce=s("el-popconfirm"),de=s("pure-table"),N=s("IconifyIconOffline"),I=s("el-checkbox"),pe=s("el-tree-v2"),j=Ce("tippy");return E(),F("div",Ue,[l(ie,{ref_key:"formRef",ref:g,inline:!0,model:e(n),class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px] overflow-auto"},{default:a(()=>[l(y,{label:"角色名称：",prop:"name"},{default:a(()=>[l($,{modelValue:e(n).name,"onUpdate:modelValue":t[0]||(t[0]=o=>e(n).name=o),placeholder:"请输入角色名称",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),l(y,{label:"角色标识：",prop:"code"},{default:a(()=>[l($,{modelValue:e(n).code,"onUpdate:modelValue":t[1]||(t[1]=o=>e(n).code=o),placeholder:"请输入角色标识",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),l(y,{label:"状态：",prop:"status"},{default:a(()=>[l(re,{modelValue:e(n).status,"onUpdate:modelValue":t[2]||(t[2]=o=>e(n).status=o),placeholder:"请选择状态",clearable:"",class:"!w-[180px]"},{default:a(()=>[l(T,{label:"已启用",value:"1"}),l(T,{label:"已停用",value:"0"})]),_:1},8,["modelValue"])]),_:1}),l(y,null,{default:a(()=>[l(p,{type:"primary",icon:e(m)("ri:search-line"),loading:e(P),onClick:e(U)},{default:a(()=>[u(" 搜索 ")]),_:1},8,["icon","loading","onClick"]),l(p,{icon:e(m)(e(fe)),onClick:t[3]||(t[3]=o=>e(Y)(g.value))},{default:a(()=>[u(" 重置 ")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),i("div",{ref_key:"contentRef",ref:v,class:C(["flex",e(L)()?"flex-wrap":""])},[l(e(_e),{class:C([e(r)&&!e(L)()?"!w-[60vw]":"w-full"]),style:{transition:"width 220ms cubic-bezier(0.4, 0, 0.2, 1)"},title:"角色管理（仅演示，操作后不生效）",columns:e(H),onRefresh:e(U)},{buttons:a(()=>[l(p,{type:"primary",icon:e(m)(e(De)),onClick:t[4]||(t[4]=o=>e(B)())},{default:a(()=>[u(" 新增角色 ")]),_:1},8,["icon"])]),default:a(({size:o,dynamicColumns:me})=>[l(de,{ref_key:"tableRef",ref:f,"align-whole":"center",showOverflowTooltip:"","table-layout":"auto",loading:e(P),size:o,adaptive:"","row-style":e(Q),adaptiveConfig:{offsetBottom:108},data:e(X),columns:me,pagination:e(K),paginationSmall:o==="small","header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},onSelectionChange:e(se),onPageSizeChange:e(ae),onPageCurrentChange:e(ne)},{operation:a(({row:k})=>[l(p,{class:"reset-margin",link:"",type:"primary",size:o,icon:e(m)(e(Se)),onClick:M=>e(B)("修改",k)},{default:a(()=>[u(" 修改 ")]),_:2},1032,["size","icon","onClick"]),l(ce,{title:`是否确认删除角色名称为${k.name}的这条数据`,onConfirm:M=>e(ee)(k)},{reference:a(()=>[l(p,{class:"reset-margin",link:"",type:"primary",size:o,icon:e(m)(e(Re))},{default:a(()=>[u(" 删除 ")]),_:2},1032,["size","icon"])]),_:2},1032,["title","onConfirm"]),l(p,{class:"reset-margin",link:"",type:"primary",size:o,icon:e(m)(e($e)),onClick:M=>e(z)(k)},{default:a(()=>[u(" 权限 ")]),_:2},1032,["size","icon","onClick"])]),_:2},1032,["loading","size","row-style","data","columns","pagination","paginationSmall","header-cell-style","onSelectionChange","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["class","columns","onRefresh"]),e(r)?(E(),F("div",Be,[i("div",ze,[i("div",Te,[i("span",{class:C(h.value)},[W(l(N,{class:"dark:text-white",width:"18px",height:"18px",icon:e(Ie),onClick:e(z)},null,8,["icon","onClick"]),[[j,{content:"关闭"}]])],2),i("span",{class:C([h.value,"ml-2"])},[W(l(N,{class:"dark:text-white",width:"18px",height:"18px",icon:e(Pe),onClick:e(Z)},null,8,["icon","onClick"]),[[j,{content:"保存菜单权限"}]])],2)]),i("p",Ne," 菜单权限 "+G(`${(A=e(d))!=null&&A.name?`（${e(d).name}）`:""}`),1)]),l($,{modelValue:e(S),"onUpdate:modelValue":t[5]||(t[5]=o=>w(S)?S.value=o:null),placeholder:"请输入菜单进行搜索",class:"mb-1",clearable:"",onInput:e(te)},null,8,["modelValue","onInput"]),i("div",je,[l(I,{modelValue:e(V),"onUpdate:modelValue":t[6]||(t[6]=o=>w(V)?V.value=o:null),label:"展开/折叠"},null,8,["modelValue"]),l(I,{modelValue:e(R),"onUpdate:modelValue":t[7]||(t[7]=o=>w(R)?R.value=o:null),label:"全选/全不选"},null,8,["modelValue"]),l(I,{modelValue:e(x),"onUpdate:modelValue":t[8]||(t[8]=o=>w(x)?x.value=o:null),label:"父子联动"},null,8,["modelValue"])]),l(pe,{ref_key:"treeRef",ref:c,"show-checkbox":"",data:e(q),props:e(J),height:b.value,"check-strictly":!e(x),"filter-method":e(le)},{default:a(({node:o})=>[i("span",null,G(e(oe)(o.label)),1)]),_:1},8,["data","props","height","check-strictly","filter-method"])])):we("",!0)],2)])}}}),ll=Ve(Ae,[["__scopeId","data-v-6f2d9355"]]);export{ll as default};
